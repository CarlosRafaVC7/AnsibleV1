---
# Playbook principal: Administraci√≥n total de laboratorios
# SO-Ansible (Hybrid) - Soporte para Linux, Windows y macOS

- name: Configuraci√≥n de seguridad integral
  hosts: all
  become: yes
  roles:
    - security

- name: Administraci√≥n completa en Laboratorio Acad√©mico (Linux Ubuntu/Mint)
  hosts: academico
  become: yes
  roles:
    - linux

- name: Administraci√≥n completa en Laboratorio Gamer (Windows 11 Pro)
  hosts: gamer
  roles:
    - windows

- name: Administraci√≥n completa en VM macOS (Testing)
  hosts: macos_test
  become: yes
  roles:
    - macos

- name: Resumen de administraci√≥n
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Mostrar resumen final
      ansible.builtin.debug:
        msg:
          - "=== ADMINISTRACI√ìN COMPLETADA ==="
          - ""
          - "üîí Seguridad configurada en todos los hosts"
          - "Hosts configurados:"
          - "  Acad√©mico (Linux): {{ groups['academico'] | length }} host(s)"
          - "  Gamer (Windows): {{ groups['gamer'] | length }} host(s)"
          - "  macOS Test: {{ groups['macos_test'] | default([]) | length }} host(s)"
          - ""
          - "üõ°Ô∏è  Pol√≠ticas de seguridad aplicadas:"
          - "  - Firewall configurado (iptables/Windows Firewall)"
          - "  - SSH/RDP hardening aplicado"
          - "  - Monitoreo de seguridad activo"
          - "  - Integraci√≥n con pol√≠ticas ESXi"
          - ""
          - "Siguiente paso: ansible-playbook tests/validate_configuration.yml"